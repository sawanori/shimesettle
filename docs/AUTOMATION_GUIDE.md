
# 自動売上登録ツール ガイド

このツールは、指定したフォルダ内の領収書/請求書画像（画像・PDF）を読み込み、
自動的に [売上登録ページ](http://localhost:3000/sales) にアップロード・登録を行うスクリプトです。

## 前提条件

1.  **Node.js** がインストールされていること
2.  **Google Chrome** がインストールされていること
3.  **ShimeSettle** アプリがローカルで起動していること (`npm run dev`)
    *   URL: http://localhost:3000

## セットアップ

初回のみ、依存ライブラリのインストールが必要です：

```bash
npm install
# または
npm install -D playwright tsx
```

## 使い方

1.  登録したい画像を一つのフォルダにまとめます（例: `receipts_folder`）。
2.  Chromeブラウザを**完全に終了**します（重要：ログイン情報を共有するため）。
    *   ※ Chromeを終了したくない場合は、スクリプト起動後に手動ログインも可能です。
3.  以下のコマンドを実行します：

```bash
npx tsx scripts/bulk-upload-sales.ts --folder <画像フォルダのパス>
```

**実行例:**

```bash
npx tsx scripts/bulk-upload-sales.ts --folder ./my-receipts
```

## 動作の流れ

1.  Chromeブラウザが起動し、`http://localhost:3000/sales` を開きます。
2.  ログインしていない場合は、ログインを求められます（コンソールに指示が出ます）。
3.  フォルダ内の画像が1枚ずつアップロードされます。
4.  AIによる解析（金額入力）を待ちます。
5.  解析が完了すると「売上を登録」ボタンが自動で押されます。
6.  登録完了を確認し、次の画像の処理へ移ります。

## 注意点

*   **AI解析待ち**: ネットワーク状況やOpenAIの応答速度により、1枚あたり数秒〜十数秒かかります。
*   **エラー時**: 解析に失敗した場合やエラーが発生した場合は、そのファイルをスキップして次へ進みます（コンソールにエラーが出ます）。
*   **重複登録**: 同じ画像を何度も実行すると重複登録される可能性がありますのでご注意ください。
